<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>yuzhian's blog</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="Description" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
    />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css"
    />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.css"
    />
  </head>
  <body>
    <div id="app"></div>
    <script src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
    <script>
      const gitalkConfig = {
        clientID: '19828edbefbca269af40',
        clientSecret: '36370f805686467fb451d99f64809883e6393ebe',
        repo: 'yuzhian.github.io',
        owner: 'yuzhian',
        admin: ['yuzhian'],
        distractionFreeMode: true,
      }

      window.$docsify = {
        name: "yuzhian's blog",
        nameLink: '/',
        logo: '',
        repo: 'yuzhian',
        ga: 'G-MY2E2CR4ZD',
        relativePath: true,
        loadSidebar: true,
        autoHeader: true,
        loadNavbar: true,
        mergeNavbar: true,
        coverpage: false,
        auto2top: true,
        subMaxLevel: 6,
        topMargin: 200,
        themeColor: '#009688',
        formatUpdated: '{YYYY}-{MM}-{DD}',
        plugins: [
          (hook, vm) =>
            hook.beforeEach(
              html =>
                html +
                `\n 最后更新于 {docsify-updated} [:green_book: 查看源文件](https://github.com/yuzhian/yuzhian.github.io/blob/master/${vm.route.file})`
            ),
          (hook, vm) =>
            hook.beforeEach((content, next) => {
              // 先渲染页面, 以保证接下来的操作都是对当前页面进行的
              next(content)
              // 查询|创建评论列表(issues)
              const label = vm.route.path.split('/').filter(l => l).join(':') || 'home'
              const gitalk = new Gitalk({ ...gitalkConfig, id: label })
              // gitalk插件在写入元素前没有进行清空操作, 因此手动清空已存在容器
              const dom = Docsify.dom
              dom.findAll('div#gitalk-container').forEach(el => el.remove())
              // 创建容器
              const main = dom.getNode('#main')
              const container = dom.create('div')
              container.id = `gitalk-container`
              container.style = `width: ${main.clientWidth}px; margin: auto`
              dom.appendTo(dom.find('.content'), container)
              // 渲染评论区
              gitalk.render(container.id)
            }),
        ],
        search: {
          paths: 'auto',
          placeholder: '输入以查找文章',
          noData: '没有结果',
          depth: 6,
        },
        copyCode: {
          buttonText: '点击复制',
          errorText: '复制出错',
          successText: '已复制',
        },
        count: {
          countable: true,
          fontsize: '0.9em',
          color: 'rgb(90,90,90)',
          language: 'chinese',
        },
      }
    </script>
    <!-- Docsify v4 -->
    <script src="//cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/ga.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-java.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/emoji.min.js"></script>
    <script src="//unpkg.com/docsify-count/dist/countable.js"></script>
  </body>
</html>
